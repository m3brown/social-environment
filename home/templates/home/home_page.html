{% extends "base.html" %}

{% block body_class %}template-homepage{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="https://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<style>
html, body, #map {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}
#map {
    position: relative;
}

</style>
{% endblock %}


{% block content %}
<div id="map"></div>

<input type="input" style="z-index: 10000; position: absolute; top: 10px; width: 50%; left: 50px;" />
{% endblock %}

{% block extra_js %}
<script src="https://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
<script>
var map;
var initializeMap = function(position){
	map = L.map('map').setView([position.coords.latitude, position.coords.longitude], 13);

	L.tileLayer('https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoidmNjYWJyYWwiLCJhIjoiY2lpNWZpMXV3MDFnaXR3a2Z4cWhtOHIzdCJ9.VrZvhWnHZmXBxdJf1XWitQ', {
	    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
	    maxZoom: 18,
	    id: 'your.mapbox.project.id',
	    accessToken: 'your.mapbox.public.access.token'
	}).addTo(map);

	L.marker(
		[position.coords.latitude, position.coords.longitude],
		{"title": "Me"}

	).addTo(map);
}

var initialPosition = {
	"coords": {
		"latitude": 51.505,
		"longitude": -0.09
	}
};

if(navigator.geolocation){
	navigator.geolocation.getCurrentPosition(initializeMap);
}else{
	initializeMap(initialPosition);
}

</script>
{% endblock %}
